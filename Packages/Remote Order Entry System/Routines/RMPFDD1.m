RMPFDD1 ;DDC/KAW-DETERMINE PATIENT'S DDC ELIGIBILITY; [ 06/16/95   3:06 PM ]
 ;;2.0;REMOTE ORDER/ENTRY SYSTEM;;JUN 16, 1995
 ;;input:  RMPFVET,RMPFDOD,RMPFELS,RMPFF (opt.)
 ;;output: RMPFE,RMPFTE
ELIG S RMPFE="I",RMPFMSG="VALID ELIGIBILITY NOT IN DHCP PATIENT FILE"
 I RMPFVET="N" S RMPFMSG="PATIENT IS NOT A VETERAN"
 I RMPFDOD'="" S RMPFMSG="PATIENT IS DECEASED"
 I $D(RMPFELS),RMPFELS'?1"V".E S RMPFMSG="ELIGIBILITY NOT VERIFIED" G ELGE
 I RMPFVET="N" S X=0 F I=1:1 S X=$O(RMPFF(X)) Q:'X  I RMPFF(X)["ALLIED"!(RMPFF(X)["OTHER GOV") S RMPFMSG=RMPFF(X),RMPFE="E" G ELGE
 I $D(RMPFF(1)) S RMPFMSG=RMPFF(1),RMPFE="E"
ELGE S:RMPFE="I" RMPFTE=""
 W !!?23,"Patient is:  ",$S(RMPFE="E":"ELIGIBLE",1:"ELIGIBILITY CANNOT BE DETERMINED")
 W ! W:RMPFE="E" ?2 W "Priority Reason for ",$S(RMPFE="E":"E",1:"Ine"),"ligibility:  ",$E(RMPFMSG,1,44)
END K RMPFMSG,X,I Q

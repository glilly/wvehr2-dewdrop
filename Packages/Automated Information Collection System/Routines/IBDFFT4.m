IBDFFT4 ;ALB/MAF - FORMS TRACKING ; NOV 19 1996@800
 ;;3.0;AUTOMATED INFO COLLECTION SYS;;APR 24, 1997
 ;
 ;
HEADER ;  -- Set up header line for the division display
 S IBDCNT1=IBDCNT1+1
 S IBDCNT=IBDCNT+1,VALMCNT=VALMCNT+1
 ;S X=""
 D HDR S IBFLAG=1
  W !
 S IBDFDIV(IBDFDV)=IBDCNT
 W "   "
 S X="",IBDCNT=IBDCNT+1,VALMCNT=VALMCNT+1
 S IBDVAL=IBDFDV
 S IBDVAL1=$L(IBDVAL) S IBDVAL1=(80-IBDVAL1)/2 S IBDVAL1=IBDVAL1\1 S X=$$SETSTR^VALM1(" ",X,1,IBDVAL1)
 W ?IBDVAL1,$E(IBDVAL,1,25)
 S X="",IBDCNT=IBDCNT+1,VALMCNT=VALMCNT+1
 W "   "
 S IBDCNT1=IBDCNT1-1
 Q
TMP1 ; -- Set up TMP Array
 S ^TMP("FRM",$J,IBDCNT,0)=X,^TMP("FRM",$J,"IDX",VALMCNT,IBDCNT1)=""
 S ^TMP("FRMIDX",$J,IBDCNT1)=VALMCNT
 Q
 ;
 ;
HEADER1 ;  -- Set up header line for the display
 D:'$D(IBFLAG) HDR I $D(IBFLAG) K IBFLAG
 I $D(VAUTG) D HEADER2^IBDFFT4
 S IBDCNT1=IBDCNT1+1
 S IBDCNT=IBDCNT+1,VALMCNT=VALMCNT+1
 ;S X=""
 W !
 I $D(VAUTG) S IBDFCLIN(IBDFGR,IBDFCL)=IBDCNT
 I '$D(VAUTG) S IBDFCLIN(IBDFDV,IBDFCL)=IBDCNT
 W "   "
 S X="",IBDCNT=IBDCNT+1,VALMCNT=VALMCNT+1
 S IBDVAL=IBDFCL
 W $E(IBDVAL,1,25)
 S IBDCNT1=IBDCNT1-1
 Q
HEADER2 ;  -- Set up header line for the division display
 S IBDCNT1=IBDCNT1+1
 S IBDCNT=IBDCNT+1,VALMCNT=VALMCNT+1
 ;S X=""
 W !
 S IBDFGROP(IBDFDV,IBDFGR)=IBDCNT
 W "   "
 S X="",IBDCNT=IBDCNT+1,VALMCNT=VALMCNT+1
 ;S IBDVAL=$P(^IBD(357.99,IBDFGR,0),"^",1)
 S IBDVAL=IBDFGR
 S IBDVAL1=$L(IBDVAL) S IBDVAL1=(80-IBDVAL1)/2 S IBDVAL1=IBDVAL1\1 S X=$$SETSTR^VALM1(" ",X,1,IBDVAL1)
 W ?IBDVAL1,$E(IBDVAL,1,25)
 S X="",IBDCNT=IBDCNT+1,VALMCNT=VALMCNT+1
 W "   "
 S IBDCNT1=IBDCNT1-1
 Q
NUL ; -- NULL MESSAGE
 S ^TMP("FRM",$J,1,0)=" ",^TMP("FRM",$J,2,0)="There are no encounter forms that meet this criteria.",^TMP("FRMIDX",$J,1)=1,^TMP("FRMIDX",$J,2)=2
 Q
HDR ;  -- Report main heading
 S IBDFPAGE=IBDFPAGE+1
 W @IOF,"Encounter forms - printed; scanned (to PCE, w/ERrors); pending pages;",?90,IBDFDAT,?120,"PAGE ",IBDFPAGE
 W !,"data entry (to PCE,w/ERrors); error detected,not transmitted; not printed."
 W !
 W ?7,"FORM ID",?17,"APPT. D/T",?34,"PATIENT/CLINIC",?50,"PRINTED",?61,"SCANNED",?72,"STATUS",?82,"CHECK OUT",?96,"EDITED"
 Q
PH Q:$O(^UTILITY("VAS",$J,DGJTDV,DGJTPHY,DGJTPT))]""  Q:$O(^UTILITY("VAS",$J,DGJTDV,DGJTPHY,DGJTPT,DFN,IFN))]""

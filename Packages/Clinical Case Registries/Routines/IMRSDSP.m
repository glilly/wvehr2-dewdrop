IMRSDSP ; HCIOFO/FAI - VIRAL LOAD AND CD4 TABLE DISPLAY; 11/13/01  07:18
 ;;2.1;IMMUNOLOGY CASE REGISTRY;**16**;Feb 09, 1998
 ;
START S GRP=""
 F  S GRP=$O(^IMR(158.9,1,3,GRP)) Q:GRP=""  S GROUP=$P($G(^IMR(158.9,1,3,GRP,0)),U,1) D CD4,VIRAL
 Q
CD4 Q:GROUP'=1
 Q:TTYPE="V"
 S GRPNM=$P($G(^IMR(158.95,GROUP,0)),U,1)
 D LABS
 Q
VIRAL Q:GROUP'=8
 Q:TTYPE="C"
 S GRPNM=$P($G(^IMR(158.95,GROUP,0)),U,1)
 D LABS
 Q
LABS S B="" F  S B=$O(^IMR(158.9,1,3,GRP,B)),C="" Q:B=""  F  S C=$O(^IMR(158.9,1,3,GRP,B,C)),D="" Q:C=""  F  S D=$O(^IMR(158.9,1,3,GRP,B,C,D)),L="" Q:D=""  F  S L=$O(^IMR(158.9,1,3,GRP,B,C,D,"B",L)) Q:L=""  D MATCH
 Q
MATCH S TE=$P($G(^IMR(158.9,1,3,GRP,B,C,0)),U,1),TYPE=$P($G(^IMR(158.96,TE,0)),U,1)
 S LBNM=$P($G(^LAB(60,L,0)),U,1)
 S NODE=$P($G(^LAB(60,L,0)),U,5)
 Q:NODE=""
 S IMRDTNM=$P(NODE,";",2)
 S IMRVALS(IMRDTNM,L)=GRPNM_"^"_TYPE_"^"_LBNM
 Q
CLEAR ; Kill Variables
 K IMRT1,IMRT2,DFN,IMRLD,IMRLD1,IMRLD2,B,C,GRP,TE,TYPE,NODE,GRPNM,D,GROUP
 Q

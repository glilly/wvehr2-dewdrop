ENJINK ;(WASH ISC)/JA-Screen Data Deletion ;5-29-91
 ;;7.0;ENGINEERING;;Aug 17, 1993
 I V(V)="" S X="" X DJCL W "No data entered",*7 Q
 I V(V)'="" S @$P(DJJ(V),U,2) X XY W @DJHIN X XY W V(V),@DJLIN
 ;I '$D(^DIC(DJDD,0,"DEL")) G KILL
 ;I DUZ(0)["@" G KILL
 ;I $D(^DD(DJDD,0,"DEL")),DUZ(0)[^DD(DJDD,0,"DEL") G KILL
 G KILL:$P(DJJ(V),U,3)'=.01,KILL:'$D(^DIC(DJDD,0,"DEL")) G KILL:DUZ(0)="@" I $D(^DIC(DJDD,0,"DEL")) G KILL:DUZ(0)[^("DEL")
 X DJCL W *7,@DJHIN,"NOT ALLOWED TO DELETE",@DJLIN S X=V(V) G HALT
KILL I $D(^DD(DJDD,DJAT,8.5)),DUZ(0)'[^(8.5),DUZ(0)'="@" X DJCL W *7,@DJHIN,"NOT ALLOWED TO DELETE",@DJLIN S X=V(V) G HALT
ILL I DJ4["R",$P(DJJ(V),U,3)'=.01 X DJCL W *7,@DJHIN,"REQUIRED <NOTHING DELETED>",@DJLIN S X=V(V) G HALT
 G N:$P(DJJ(V),U,3)'=.01 X DJCL W *7,"SURE YOU WANT TO DELETE?: NO//" R X:DTIME I X["Y" X DJCP S DY=22,DX=0 X XY W @DJEOP S DIE=DIC,DR=".01///@" D ^DIE G:'$D(DA) K S X=V(V) G HALT
 S X=V(V) G HALT
N X DJCP X DJCL W *7,"SURE YOU WANT TO DELETE?: NO//" R X:DTIME I X["Y" X DJCP S DY=22,DX=0 X XY W @DJEOP S DIE=DIC,DR=DJAT_"///@" D ^DIE S X=$S(X'="":V(V),1:"@") Q
 S X=V(V) Q
NXT S DJNN=$O(^DD(DJDD,DJAT,DJNN)) Q:DJNN=""  I $D(^(DJNN,2)) S X=V(V) X ^(2) S X="@" G NXT
 K DJDN Q
K I DJDPL'="DJ.DEF2" K V S V=0 G K1
 S V=5.9 F DJK=6:1:25 K V(DJK)
K1 F DJK=0:0 S V=$O(DJJ(V)) Q:V=""  S @$P(DJJ(V),U,2) X XY S $P(DJDB,".",DJJ(V))="." W DJDB K DJDB
 S V=0,X="@" K DJDN,DJK Q
HALT I $D(^ENG(6910.9,DJN,1,$O(^ENG(6910.9,DJN,1,"A",V,0)),2)) R " Carriage return to continue",DJX:DTIME Q

FSCGETS ;SLC/STAFF-NOIS Get Call Info - Short Line of Call ;10/20/97  20:42
 ;;1.1;NOIS;;Sep 06, 1998
 ;
SHORT(CALLNUM,NUM) ; $$(call number,number) -> numbered line with call ref and subject
 N DEV,LINE,MOD,PRI,REF,SPECD,STATUS,SUBJECT,SUP,USER
 Q:'$D(^FSCD("CALL",+CALLNUM,0)) "" S SUBJECT=$G(^(1)),REF=$P(^(0),U)
 I '$L($P($G(FSCUD),U)) S LINE=$$SETSTR^VALM1(SUBJECT,REF,20,$L(SUBJECT)),LINE=$$SETSTR^VALM1(LINE,NUM,6,$L(LINE)) Q LINE
 S SUP=$P(^FSCD("CALL",+CALLNUM,0),U,2),DEV=$P(^(0),U,17),USER=$P(^(0),U,9),SPECD=$P(^(0),U,21),MOD=$P(^(0),U,8),PRI=$P(^(0),U,10)
 S LINE=$$SETSTR^VALM1(REF,NUM,6,$L(REF))
 I FSCUD["S" S STATUS=$P($$STAT^FSCESU(SUP,DEV),U,2),LINE=$$SETSTR^VALM1(STATUS,LINE,$L(LINE)+4,1)
 I FSCUD["M" S MOD=$$MODINI^FSCUF(MOD),LINE=$$SETSTR^VALM1(MOD,LINE,$L(LINE)+4,5)
 I FSCUD["U" S USER=$$USERINI^FSCUF(USER),LINE=$$SETSTR^VALM1(USER,LINE,$L(LINE)+3,3)
 I FSCUD["R" S SPECD=$$USERINI^FSCUF(SPECD),LINE=$$SETSTR^VALM1(SPECD,LINE,$L(LINE)+4,3)
 I FSCUD["P" S PRI=$E($$VALUE^FSCGET(PRI,7100,6)),LINE=$$SETSTR^VALM1(PRI,LINE,$L(LINE)+4,1)
 S LINE=$$SETSTR^VALM1(SUBJECT,LINE,$L(LINE)+4,$L(SUBJECT))
 Q LINE

IBDF18E3 ;ALB/AAS - ENCOUNTER FORM - PCE DEVICE INTERFACE utilities ;04-OCT-94
 ;;3.0;AUTOMATED INFO COLLECTION SYS;;APR 24, 1997
 ;
QUE ; -- always task off from scanner
 S IBD("AICS")=1 ;flag for IBDF PCE EVENT protocol
 D VALIDATE^PXCA(.PXCA,.PXCAVSIT)
 I $D(PXCA("ERROR")) S PXCASTAT=0 Q
 I '$D(PXCA("ERROR")) S PXCASTAT=1
 ;
 S ZTDTH=$H,ZTRTN="DQ^IBDF18E3"
 S ZTSAVE("PXCA(")="",ZTSAVE("PX*")="",ZTSAVE("IBD(""AICS"")")=""
 S ZTDESC="IBD - Pass scanning data to PCE"
 S ZTIO="IBD RESOURCE"
 D ^%ZTLOAD
 ;
 K IBD("AICS")
 Q
 ;
DQ ; -- entry point from taskman
 D FOREGND^PXCA(.PXCA,.PXCASTAT)
 S ZTREQ="@"
 K PXCA,PXCASTAT,IBD,IBDSEL,IBDF
 Q

IB20PT3 ;ALB/CPM - IB V2.0 POST INIT, RESOLVE TABLE POINTERS ; 02-SEP-93
 ;;Version 2.0 ; INTEGRATED BILLING ;; 21-MAR-94
 ;
 ; Control for table pointer resolution.
 D NEWAT^IB20PT31 ;  Add new Action Types into file #350.1
 D NEWAC^IB20PT31 ;  Add new Action Charges into file #350.2
 D ATSE ;            Resolve ptrs to #49 from #350.1
 D ATAC^IB20PT31 ;   Resolve ptrs to #350.1 from #350.2
 D ^IB20PT32 ;       Resolve ptrs to #350.1 from #350.1
 Q
 ;
 ;
ATSE ; Resolve pointers to file #49 from file #350.1
 W !!,">>> Updating pointers to file #49 from file #350.1... "
 S IBSERV=$P($G(^IBE(350.9,1,1)),"^",14)
 I 'IBSERV W !!,"You must define MAS as a service in your IB Site Parameter file before you",!,"can update the IB Action Type file!  Please perform this action after",!,"installing this software." G ATSEQ
 ;
 ; - update both service and AR category
 F IBI=1:1 S IBX=$P($T(DATA+IBI),";;",2,99) Q:IBX=""  D
 .S IBATYP=$O(^IBE(350.1,"B",$P(IBX,"^"),0)) Q:'IBATYP
 .;S IBARTYP=$O(^PRCA(430.2,"B",$P(IBX,"^",3),0)) Q:'IBARTYP
 .;S $P(^IBE(350.1,IBATYP,0),"^",3)=IBARTYP
 .S DIE="^IBE(350.1,",DA=IBATYP,DR=".04////"_IBSERV D ^DIE K DIC,DIE,DA,DR W "."
 ;
 ; - update service only
 F IBI=1:1 S IBX=$P($T(EVT+IBI),";;",2,99) Q:IBX=""  D
 .S IBATYP=$O(^IBE(350.1,"B",IBX,0)) Q:'IBATYP
 .S DIE="^IBE(350.1,",DA=IBATYP,DR=".04////"_IBSERV D ^DIE K DIC,DIE,DA,DR W "."
 ;
ATSEQ K IBI,IBX,IBATYP,IBARTYP,IBSERV
 Q
 ;
 ;
DATA ;Action Type (#350.1)^  <null>   ^AR Category (#430.2)
 ;;DG CHAMPVA PER DIEM NEW
 ;;DG CHAMPVA PER DIEM CANCEL
 ;;DG CHAMPVA PER DIEM UPDATE
 ;
 ; - others that may need to be updated
 ;
 ;;DG FEE SERVICE (INPT) CANCEL^  ^NURSING HOME CARE(NSC)
 ;;DG FEE SERVICE (INPT) NEW^     ^NURSING HOME CARE(NSC)
 ;;DG FEE SERVICE (INPT) UPDATE^  ^NURSING HOME CARE(NSC)
 ;;DG NHCU COPAY NEW^             ^NURSING HOME CARE(NSC)
 ;;DG NHCU COPAY CANCEL^          ^NURSING HOME CARE(NSC)
 ;;DG NHCU COPAY UPDATE^          ^NURSING HOME CARE(NSC)
 ;;DG NHCU PER DIEM CANCEL^       ^NURSING HOME CARE PER DIEM
 ;;DG NHCU PER DIEM NEW^          ^NURSING HOME CARE PER DIEM
 ;;DG NHCU PER DIEM UPDATE^       ^NURSING HOME CARE PER DIEM
 ;;DG INPT COPAY (ALC) CANCEL^    ^HOSPITAL CARE (NSC)
 ;;DG INPT COPAY (ALC) NEW^       ^HOSPITAL CARE (NSC)
 ;;DG INPT COPAY (ALC) UPDATE^    ^HOSPITAL CARE (NSC)
 ;;DG INPT COPAY (BLI) CANCEL^    ^HOSPITAL CARE (NSC)
 ;;DG INPT COPAY (BLI) NEW^       ^HOSPITAL CARE (NSC)
 ;;DG INPT COPAY (BLI) UPDATE^    ^HOSPITAL CARE (NSC)
 ;;DG INPT COPAY (INT) CANCEL^    ^HOSPITAL CARE (NSC)
 ;;DG INPT COPAY (INT) NEW^       ^HOSPITAL CARE (NSC)
 ;;DG INPT COPAY (INT) UPDATE^    ^HOSPITAL CARE (NSC)
 ;;DG INPT COPAY (MED) UPDATE^    ^HOSPITAL CARE (NSC)
 ;;DG INPT COPAY (MED) NEW^       ^HOSPITAL CARE (NSC)
 ;;DG INPT COPAY (MED) CANCEL^    ^HOSPITAL CARE (NSC)
 ;;DG INPT COPAY (NEU) CANCEL^    ^HOSPITAL CARE (NSC)
 ;;DG INPT COPAY (NEU) NEW^       ^HOSPITAL CARE (NSC)
 ;;DG INPT COPAY (NEU) UPDATE^    ^HOSPITAL CARE (NSC)
 ;;DG INPT COPAY (PSY) CANCEL^    ^HOSPITAL CARE (NSC)
 ;;DG INPT COPAY (PSY) NEW^       ^HOSPITAL CARE (NSC)
 ;;DG INPT COPAY (PSY) UPDATE^    ^HOSPITAL CARE (NSC)
 ;;DG INPT COPAY (REH) CANCEL^    ^HOSPITAL CARE (NSC)
 ;;DG INPT COPAY (REH) NEW^       ^HOSPITAL CARE (NSC)
 ;;DG INPT COPAY (REH) UPDATE^    ^HOSPITAL CARE (NSC)
 ;;DG INPT COPAY (SPI) UPDATE^    ^HOSPITAL CARE (NSC)
 ;;DG INPT COPAY (SPI) CANCEL^    ^HOSPITAL CARE (NSC)
 ;;DG INPT COPAY (SPI) NEW^       ^HOSPITAL CARE (NSC)
 ;;DG INPT COPAY (SUR) NEW^       ^HOSPITAL CARE (NSC)
 ;;DG INPT COPAY (SUR) CANCEL^    ^HOSPITAL CARE (NSC)
 ;;DG INPT COPAY (SUR) UPDATE^    ^HOSPITAL CARE (NSC)
 ;;DG INPT PER DIEM CANCEL^      ^HOSPITAL CARE PER DIEM
 ;;DG INPT PER DIEM NEW^         ^HOSPITAL CARE PER DIEM
 ;;DG INPT PER DIEM UPDATE^      ^HOSPITAL CARE PER DIEM
 ;;DG FEE SERVICE (OPT) CANCEL^  ^OUTPATIENT CARE(NSC)
 ;;DG FEE SERVICE (OPT) NEW^     ^OUTPATIENT CARE(NSC)
 ;;DG FEE SERVICE (OPT) UPDATE^  ^OUTPATIENT CARE(NSC)
 ;;DG OPT COPAY CANCEL^          ^OUTPATIENT CARE(NSC)
 ;;DG OPT COPAY NEW^             ^OUTPATIENT CARE(NSC)
 ;;DG OPT COPAY UPDATE^          ^OUTPATIENT CARE(NSC)
 ;
 ;
EVT ;Event Action Type (#350.1)
 ;;CHAMPVA SUBSISTENCE LIMIT
 ;
 ; - others that may need to be updated
 ;
 ;;MEDICARE DEDUCTIBLE
 ;;HOSPITAL ADMISSION
 ;;NHCU ADMISSION
 ;

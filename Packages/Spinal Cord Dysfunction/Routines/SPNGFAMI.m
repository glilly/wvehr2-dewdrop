SPNGFAMI ;WDE/SD OUTCOME GRID FOR FAM 9/19/2002
 ;;2.0;Spinal Cord Dysfunction;**19**;01/02/1997
CALC ;
 S SPNGOAL=""
 S SPNXX=0 F  S SPNXX=$O(^TMP($J,SPNXX)) Q:SPNXX=""  S SPNYY=0 F  S SPNYY=$O(^TMP($J,SPNXX,SPNYY)) Q:SPNYY=""  S SPNZZ=0 F  S SPNZZ=$O(^TMP($J,SPNXX,SPNYY,SPNZZ)) Q:SPNZZ=""  D  Q:+SPNGOAL
 .I $P(^SPNL(154.1,SPNZZ,0),U,2)=5 I 27[$P(^SPNL(154.1,SPNZZ,2),U,17) S SPNGOAL=SPNZZ
 I SPNGOAL="" D ZAP Q
 S XA=$S(SPNRSCO=4:"Finish",SPNRSCO=5:"F/U (END)",SPNRSCO=9:"Finish",SPNRSCO=10:"F/U (END)",1:"ERROR")
 ;Swallowing
 S SPNR1C1=$P($G(^SPNL(154.1,DA,"FAM")),U,1)
 I +SPNR1C1 S SPNR1C1=$P($G(^SPNL(154.11,SPNR1C1,0)),U,1)
 I SPNR1C1="" S SPNR1C1=0
 S SPNR2C1=$P($G(^SPNL(154.1,SPNGOAL,"FAM")),U,1)
 I +SPNR2C1 S SPNR2C1=$P($G(^SPNL(154.11,SPNR2C1,0)),U,1)
 I SPNR2C1="" S SPNR2C1=0
 S SPNR3C1=SPNR1C1-SPNR2C1
 ;Car Transfers
 S SPNR1C2=$P($G(^SPNL(154.1,DA,"FAM")),U,2)
 I +SPNR1C2 S SPNR1C2=$P($G(^SPNL(154.11,SPNR1C2,0)),U,1)
 I SPNR1C2="" S SPNR1C2=0
 S SPNR2C2=$P($G(^SPNL(154.1,SPNGOAL,"FAM")),U,2)
 I +SPNR2C2 S SPNR2C2=$P($G(^SPNL(154.11,SPNR2C2,0)),U,1)
 I SPNR2C2="" S SPNR2C2=0
 S SPNR3C2=SPNR1C2-SPNR2C2
 ;Community
 S SPNR1C3=$P($G(^SPNL(154.1,DA,"FAM")),U,3)
 I +SPNR1C3 S SPNR1C3=$P($G(^SPNL(154.11,SPNR1C3,0)),U,1)
 I SPNR1C3="" S SPNR1C3=0
 S SPNR2C3=$P($G(^SPNL(154.1,SPNGOAL,"FAM")),U,3)
 I +SPNR2C3 S SPNR2C3=$P($G(^SPNL(154.11,SPNR2C3,0)),U,1)
 I SPNR2C3="" S SPNR2C3=0
 S SPNR3C3=SPNR1C3-SPNR2C3
 ;READING
 S SPNR1C4=$P($G(^SPNL(154.1,DA,"FAM")),U,4)
 I +SPNR1C4 S SPNR1C4=$P($G(^SPNL(154.11,SPNR1C4,0)),U,1)
 I SPNR1C4="" S SPNR1C4=0
 S SPNR2C4=$P($G(^SPNL(154.1,SPNGOAL,"FAM")),U,4)
 I +SPNR2C4 S SPNR2C4=$P($G(^SPNL(154.11,SPNR2C4,0)),U,1)
 I SPNR2C4="" S SPNR2C4=0
 S SPNR3C4=SPNR1C4-SPNR2C4
 ;Writing
 S SPNR1C5=$P($G(^SPNL(154.1,DA,"FAM")),U,5)
 I +SPNR1C5 S SPNR1C5=$P($G(^SPNL(154.11,SPNR1C5,0)),U,1)
 I SPNR1C5="" S SPNR1C5=0
 S SPNR2C5=$P($G(^SPNL(154.1,SPNGOAL,"FAM")),U,5)
 I +SPNR2C5 S SPNR2C5=$P($G(^SPNL(154.11,SPNR2C5,0)),U,1)
 I SPNR2C5="" S SPNR2C5=0
 S SPNR3C5=SPNR1C5-SPNR2C5
 ;SPEECH
 S SPNR1C6=$P($G(^SPNL(154.1,DA,"FAM")),U,6)
 I +SPNR1C6 S SPNR1C6=$P($G(^SPNL(154.11,SPNR1C6,0)),U,1)
 I SPNR1C6="" S SPNR1C6=0
 S SPNR2C6=$P($G(^SPNL(154.1,SPNGOAL,"FAM")),U,6)
 I +SPNR2C6 S SPNR2C6=$P($G(^SPNL(154.11,SPNR2C6,0)),U,1)
 I SPNR2C6="" S SPNR2C6=0
 S SPNR3C6=SPNR1C6-SPNR2C6
 ;
A ;Emotional
 S SPNR4C1=$P($G(^SPNL(154.1,DA,"FAM")),U,7)
 I +SPNR4C1 S SPNR4C1=$P($G(^SPNL(154.11,SPNR4C1,0)),U,1)
 I SPNR4C1="" S SPNR4C1=0
 S SPNR5C1=$P($G(^SPNL(154.1,SPNGOAL,"FAM")),U,7)
 I +SPNR5C1 S SPNR5C1=$P($G(^SPNL(154.11,SPNR5C1,0)),U,1)
 I SPNR5C1="" S SPNR5C1=0
 S SPNR6C1=SPNR4C1-SPNR5C1
 ;adjust
 S SPNR4C2=$P($G(^SPNL(154.1,DA,"FAM")),U,8)
 I +SPNR4C2 S SPNR4C2=$P($G(^SPNL(154.11,SPNR4C2,0)),U,1)
 I SPNR4C2="" S SPNR4C2=0
 S SPNR5C2=$P($G(^SPNL(154.1,SPNGOAL,"FAM")),U,8)
 I +SPNR5C2 S SPNR5C2=$P($G(^SPNL(154.11,SPNR5C2,0)),U,1)
 I SPNR5C2="" S SPNR5C2=0
 S SPNR6C2=SPNR4C2-SPNR5C2
 ;employability
 S SPNR4C3=$P($G(^SPNL(154.1,DA,"FAM")),U,9)
 I +SPNR4C3 S SPNR4C3=$P($G(^SPNL(154.11,SPNR4C3,0)),U,1)
 I SPNR4C3="" S SPNR4C3=0
 S SPNR5C3=$P($G(^SPNL(154.1,SPNGOAL,"FAM")),U,9)
 I +SPNR5C3 S SPNR5C3=$P($G(^SPNL(154.11,SPNR5C3,0)),U,1)
 I SPNR5C3="" S SPNR5C3=0
 S SPNR6C3=SPNR4C3-SPNR5C3
 ;Orientation
 S SPNR4C4=$P($G(^SPNL(154.1,DA,"FAM")),U,10)
 I +SPNR4C4 S SPNR4C4=$P($G(^SPNL(154.11,SPNR4C4,0)),U,1)
 I SPNR4C4="" S SPNR4C4=0
 S SPNR5C4=$P($G(^SPNL(154.1,SPNGOAL,"FAM")),U,10)
 I +SPNR5C4 S SPNR5C4=$P($G(^SPNL(154.11,SPNR5C4,0)),U,1)
 I SPNR5C4="" S SPNR5C4=0
 S SPNR6C4=SPNR4C4-SPNR5C4
 ;Attention
 S SPNR4C5=$P($G(^SPNL(154.1,DA,"FAM")),U,11)
 I +SPNR4C5 S SPNR4C5=$P($G(^SPNL(154.11,SPNR4C5,0)),U,1)
 I SPNR4C5="" S SPNR4C5=0
 S SPNR5C5=$P($G(^SPNL(154.1,SPNGOAL,"FAM")),U,11)
 I +SPNR5C5 S SPNR5C5=$P($G(^SPNL(154.11,SPNR5C5,0)),U,1)
 I SPNR5C5="" S SPNR5C5=0
 S SPNR6C5=SPNR4C5-SPNR5C5
 ;Safety
 S SPNR4C6=$P($G(^SPNL(154.1,DA,"FAM")),U,12)
 I +SPNR4C6 S SPNR4C6=$P($G(^SPNL(154.11,SPNR4C6,0)),U,1)
 I SPNR4C6="" S SPNR4C6=0
 S SPNR5C6=$P($G(^SPNL(154.1,SPNGOAL,"FAM")),U,12)
 I +SPNR5C6 S SPNR5C6=$P($G(^SPNL(154.11,SPNR5C6,0)),U,1)
 I SPNR5C6="" S SPNR5C6=0
 S SPNR6C6=SPNR4C6-SPNR5C6
C ;
 Q
ZAP ;
 Q

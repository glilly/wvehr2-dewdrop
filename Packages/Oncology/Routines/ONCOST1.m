ONCOST1 ;WASH ISC/SRR,MLH-STATISTICS TIME FRAME (continued) ;12/15/99
 ;;2.11;ONCOLOGY;**5,25**;Mar 07, 1995
 ;
SCT1 ;CALL 1 TO ONCOSCT
 ;
STG ;individual stage group/treatment
 W @IOF,!!!?10,"This option will print cross-tabs for ALL ANALYTIC",!?10,"cases for TREATMENT by STAGE groups (I,II,III,IV)",!!!
SZIS K IO("Q") S %ZIS="Q" S:$D(ONCOS("I")) IOP=ONCOS("I") D ^%ZIS I POP S ONCOUT="" G EX
XG F G="I","II","III","IV" D GP
 G EX
GP F ONCOS("C")="GP-"_G_" AJCC SUMMARY STAGE","TREATMENT" D SET,TSK
 Q
SET S ONCOS("T")="ONCOS ANNUAL ANAL/STAGE "_G,ONCOS("F")="PRIMARY",ONCOS("R")=ROW,(ONCOS("Y"),ONCOS("N"))="",ONCOS("P")=1,ONCOS("H")=^DD("SITE")_" "_ONCOS("R")_"-"_ONCOS("C")
 Q
TSK D:'$D(IO("Q")) ^ONCOSCT I $D(IO("Q")) S ZTRTN="PRINT^ONCOSCT",ZTDESC="ONCOLOGY CROSS-TABS",ZTSAVE("ONCOS*")="",ZTDTH=$H D ^%ZTLOAD K ZTSK
 Q
 G EX
 S ONCOS("C")="GP-"_G_" AJCC SUMMARY STAGE",ONCOS("T")="ONCOS ANNUAL ANAL/STAGE "_G,ONCOS("F")="PRIMARY",ONCOS("P")=1,(ONCOS("Y"),ONCOS("N"))="" G ZIS
 ;
 ;
ZIS W !! K IO("Q") S %ZIS="Q" S:$D(ONCOS("I")) IOP=ONCOS("I") D ^%ZIS I POP S ONCOUT="" G EX
NQ I '$D(IO("Q")) D ^ONCOSCT G EX
ZT S ZTRTN="PRINT^ONCOSCT",ZTDESC="ONCOLOGY STATS"
 S ZTSAVE("ONCOS*")="" D ^%ZTLOAD K ZTSK G EX
JOB ; SET/RUN TEPLATES,RUN REPORTS
 D TEM G EX
TEM S XDA=$O(^DIBT("F165.5","ONCOS ANNUAL ANALYTIC",0)) Q:XDA'>0  K ^DIBT(XDA,1)
G F G=0,"I","II","III","IV","U","NA" S XD0=$O(^DIBT("F165.5","ONCOS ANNUAL ANAL/STAGE "_G,0)) Q:XD0'>0  K ^DIBT(XD0,1) S XD(G)=XD0
 S YR=ONCOYR,D0=0 F  S D0=$O(^ONCO(165.5,"AY",YR,D0)) Q:D0'>0  I $$DIV^ONCFUNC(D0)=DUZ(2),$P(^ONCO(165.5,D0,0),U,20)=1 S ^DIBT(XDA,1,D0)="",G=$P($G(^ONCO(165.5,D0,2)),U,28) I G'="" S ^DIBT(XD(G),1,D0)=""
 S $P(^DIBT(XDA,0),U,2)=DT F G=0,"I","II","III","IV","U","NA" S $P(^DIBT(XD(G),0),U,2)=DT
 Q
 ;
EX D ^%ZISC Q  ;EXIT

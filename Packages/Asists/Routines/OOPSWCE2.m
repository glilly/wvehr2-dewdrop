OOPSWCE2 ;WIOFO/LLH-Worker's Comp CA2 Edit routine ;03/23/00
 ;;2.0;ASISTS;;Jun 03, 2002
 ;;
CA2 ; CA2 FORM
 N ITEM
 S (AIEN,AGN,ADD,CITY,STATE,ZIP)=""
 S (PNAME,PADD,PCITY,PSTATE,PZIP,PTITLE,STAT,SIEN)=""
 S WCPDO=""
 W !!," Notice of Occupational Disease and Claim for Compensation (Form CA-2)"
 W !!,"    Worker's Comp Edit of the Supervisor's Report"
 W !,"       ----------------------------------------",!
 D AGNINFO^OOPSUTL2
 S DR=""
 ; Patch 8 - added OWCP District Office
 S WCPDO=$$GET1^DIQ(2262,"1,","2:.01","E")
 S DR(1,2260,1)="73      OWCP DISTRICT OFFICE......//^S X=WCPDO"
 ; Patch 11 - default chargeback code from site parameter file
 S DR(1,2260,2)="70      OWCP CHARGEBACK CODE......//^S X=OWCP"
 S DR(1,2260,3)="62      OWCP NOI CODE............."
 ; Patch 8 - NOI code cannot begin with a T if CA2
 S DR(1,2260,8)="I X,($E($$GET1^DIQ(2263.3,X,1))=""T"") W !?3,""NOI Code cannot begin with a T for a CA2."" S Y=62"
 ; Removed, will generate from PAID file
 ; S DR(1,2260,7)="224 9a.  OCCUPATION CODE..............."
 S DR(1,2260,9)="226 14b. TYPE CODE....................."
 S DR(1,2260,10)="227 14c. SOURCE CODE..................."
 S DR(1,2260,15)="230 19.  AGENCY NAME...................//^S X=AGN;I X="""" S Y=""@5"""
 S DR(1,2260,16)="I X'="""",'$$VCHAR^OOPSUTL4(X) W !,""Invalid character entered, (~,`,@,#,$,%,^,*,_,|,\,},{,[,],>, or <),"",!,""please edit."",! S Y=230"
 S DR(1,2260,20)="231      STREET ADDRESS................//^S X=ADD"
 S DR(1,2260,21)="I X'="""",'$$VCHAR^OOPSUTL4(X) W !,""Invalid character entered, (~,`,@,#,$,%,^,*,_,|,\,},{,[,],>, or <),"",!,""please edit."",! S Y=231"
 S DR(1,2260,25)="232      CITY..........................//^S X=CITY"
 S DR(1,2260,26)="I X'="""",'$$VCHAR^OOPSUTL4(X) W !,""Invalid character entered, (~,`,@,#,$,%,^,*,_,|,\,},{,[,],>, or <),"",!,""please edit."",! S Y=232"
 S DR(1,2260,30)="233      STATE.........................//^S X=STATE"
 S DR(1,2260,35)="234      AGENCY ZIP CODE...............//^S X=ZIP"
 S DR(1,2260,40)="S Y=237"
 S DR(1,2260,45)="@5"
 S DR(1,2260,50)="231////@"
 S DR(1,2260,55)="232////@"
 S DR(1,2260,60)="233////@"
 S DR(1,2260,65)="234////@"
 S DR(1,2260,70)="237 20.  EMPLOYEE'S DUTY STATION......."
 S DR(1,2260,72)="I X'="""",'$$VCHAR^OOPSUTL4(X) W !,""Invalid character entered, (~,`,@,#,$,%,^,*,_,|,\,},{,[,],>, or <),"",!,""please edit."",! S Y=237"
 S DR(1,2260,75)="238      STREET ADDRESS................"
 S DR(1,2260,76)="I X'="""",'$$VCHAR^OOPSUTL4(X) W !,""Invalid character entered, (~,`,@,#,$,%,^,*,_,|,\,},{,[,],>, or <),"",!,""please edit."",! S Y=238"
 S DR(1,2260,80)="239      CITY.........................."
 S DR(1,2260,82)="I X'="""",'$$VCHAR^OOPSUTL4(X) W !,""Invalid character entered, (~,`,@,#,$,%,^,*,_,|,\,},{,[,],>, or <),"",!,""please edit."",! S Y=239"
 S DR(1,2260,85)="240      STATE........................."
 S DR(1,2260,90)="241      ZIP CODE......................"
 S DR(1,2260,95)="W !,"" 21.  REGULAR WORK HOURS:"""
 S DR(1,2260,100)="242      FROM.........................."
 S DR(1,2260,105)="243      TO............................"
 S DR(1,2260,110)="S ITEM=22 W !,"" 22.  REGULAR WORK SCHEDULE.........: ""_$$GET1^DIQ(2260,D0,244,""E"")"
 S DR(1,2260,115)="K DIR S DIR(""A"")=""                                     "",DIR(""B"")=$$GET1^DIQ(2260,D0,244,""I"") D RWS^OOPSUTL2 S:$D(DIRUT) Y=""@2"""
 S DR(1,2260,120)="W !,"" 23.  NAME AND ADDRESS OF PHYSICIAN FIRST PROVIDING MEDICAL CARE"""
 ;Patch 7 - default physician info - if physician deleted, del oth flds
 D PHINFO^OOPSUTL2
 S DR(1,2260,125)="245      NAME OF PHYSICIAN.............//^S X=PNAME;I X="""" S Y=""@4"""
 S DR(1,2260,126)="I X'="""",'$$NMCHK^OOPSUTL3(X) D NMERR^OOPSUTL3 K X S Y=245"
 S DR(1,2260,130)="246      STREET ADDRESS................//^S X=PADD"
 S DR(1,2260,131)="I X'="""",'$$VCHAR^OOPSUTL4(X) W !,""Invalid character entered, (~,`,@,#,$,%,^,*,_,|,\,},{,[,],>, or <),"",!,""please edit."",! S Y=246"
 S DR(1,2260,135)="247      CITY..........................//^S X=PCITY"
 S DR(1,2260,136)="I X'="""",'$$VCHAR^OOPSUTL4(X) W !,""Invalid character entered, (~,`,@,#,$,%,^,*,_,|,\,},{,[,],>, or <),"",!,""please edit."",! S Y=247"
 S DR(1,2260,140)="248      STATE.........................//^S X=STATE"
 S DR(1,2260,145)="249      ZIP CODE......................//^S X=PZIP"
 S DR(1,2260,150)="270      PHYSICIAN TITLE...............//^S X=PTITLE"
 S DR(1,2260,155)="S Y=250"
 S DR(1,2260,160)="@4"
 S DR(1,2260,165)="246////@"
 S DR(1,2260,170)="247////@"
 S DR(1,2260,175)="248////@"
 S DR(1,2260,180)="249////@"
 S DR(1,2260,181)="270////@"
 S DR(1,2260,185)="250 24.  1ST DATE MEDICAL CARE RECEIVED"
 S DR(1,2260,190)="I X'="""",'$$FUT^OOPSUTL4(X) S Y=250"
 S DR(1,2260,195)="251 25.  DO MEDICAL REPORTS SHOW EMPLOYEE IS DISABLED FOR WORK"
 S DR(1,2260,200)="252 26.  DATE EMPLOYEE FIRST REPORTED CONDITION TO SUPERVISOR."
 S DR(1,2260,205)="I X'="""",'$$FUT^OOPSUTL4(X) S Y=252"
 S DR(1,2260,210)="253 27.  DATE/TIME EMPLOYEE STOPPED WORK.."
 S DR(1,2260,215)="I X'="""",'$$FUT^OOPSUTL4($P(X,""."")) S Y=253"
 S DR(1,2260,220)="254 28.  DATE/TIME EMPLOYEE'S PAY STOPPED."
 S DR(1,2260,225)="I X'="""",'$$FUT^OOPSUTL4($P(X,""."")) S Y=254"
 S DR(1,2260,230)="255 29.  DATE EMPLOYEE WAS LAST EXPOSED TO CONDITIONS ALLEGED TO HAVE CAUSED             DISEASE OR ILLNESS..............."
 S DR(1,2260,235)="256 30.  DATE/TIME RETURNED TO WORK......."
 S DR(1,2260,240)="I X'="""",'$$FUT^OOPSUTL4($P(X,""."")) S Y=256"
 S DR(1,2260,245)="@3"
 S DR(1,2260,250)="W !,"" 31.  IF EMPLOYEE HAS RETURNED TO WORK AND WORK ASSIGNMENT HAS CHANGED, DESCRIBE      NEW DUTIES"""
 S DR(1,2260,255)="257      DESCRIPTION~"
 S DR(1,2260,260)="W !"
 S DR(1,2260,261)="S MAX=$$WP^OOPSUTL4(257)"
 S DR(1,2260,262)="I '$P(MAX,U,2) W !,""Invalid character entered, (~,`,@ ,#,$,%,^,*,_,|,\,},{,[,],>, or <),"",!,""please edit."",! S Y=257"
 S DR(1,2260,263)="I +MAX>MAX1 W !!,""Max length for field is "",MAX1,"" characters, you have entered "",+MAX,"".  Please Edit."",! S Y=257"
 S DR(1,2260,265)="60 32.  EMPLOYEE'S RETIREMENT.........//^S X=RET;I X<3 S Y=""@6"""
 S DR(1,2260,266)="61      OTHER RETIREMENT.............."
 S DR(1,2260,267)="I X'="""",'$$VCHAR^OOPSUTL4(X) W !,""Invalid character entered, (~,`,@,#,$,%,^,*,_,|,\,},{,[,],>, or <),"",!,""please edit."",! S Y=61"
 S DR(1,2260,268)="S Y=""@7"""
 S DR(1,2260,269)="@6"
 S DR(1,2260,270)="61////@"
 S DR(1,2260,275)="@7"
 S DR(1,2260,280)="258 33.  WAS INJURY CAUSED BY 3RD PARTY;I X=""N"" S Y=""@1"""
 S DR(1,2260,285)="259 34.  NAME OF THIRD PARTY..........."
 S DR(1,2260,286)="I X'="""",'$$VCHAR^OOPSUTL4(X) W !,""Invalid character entered, (~,`,@,#,$,%,^,*,_,|,\,},{,[,],>, or <),"",!,""please edit."",! S Y=259"
 S DR(1,2260,290)="260      STREET ADDRESS................"
 S DR(1,2260,291)="I X'="""",'$$VCHAR^OOPSUTL4(X) W !,""Invalid character entered, (~,`,@,#,$,%,^,*,_,|,\,},{,[,],>, or <),"",!,""please edit."",! S Y=260"
 S DR(1,2260,295)="261      CITY.........................."
 S DR(1,2260,296)="I X'="""",'$$VCHAR^OOPSUTL4(X) W !,""Invalid character entered, (~,`,@,#,$,%,^,*,_,|,\,},{,[,],>, or <),"",!,""please edit."",! S Y=261"
 S DR(1,2260,300)="262      STATE........................."
 S DR(1,2260,301)="263      ZIP CODE......................"
 S DR(1,2260,302)="S Y=""@8"""
 S DR(1,2260,303)="@1"
 S DR(1,2260,304)="259////@"
 S DR(1,2260,305)="260////@"
 S DR(1,2260,306)="261////@"
 S DR(1,2260,307)="262////@"
 S DR(1,2260,308)="263////@"
 S DR(1,2260,309)="@8"
 ; Super has Signed, will not need re-signing - go to @2
 S DR(1,2260,315)="I CASIGN S Y=""@2"""
 S DR(1,2260,320)="S SUP=$$GET1^DIQ(200,DUZ,.01)"
 S DR(1,2260,325)="W !!,""      Workers Comp signing for Supervisor"""
 S DR(1,2260,330)="W !,""           Signature of Supervisor"""
 S DR(1,2260,335)="W !,""       -----------------------------------"""
 S DR(1,2260,340)="S ITEM=35 D EXCEPT^OOPSUTL2;264      EXCEPTION"
 S DR(1,2260,341)="I X'="""",'$$VCHAR^OOPSUTL4(X) W !,""Invalid character entered, (~,`,@,#,$,%,^,*,_,|,\,},{,[,],>, or <),"",!,""please edit."",! S Y=264"
 S DR(1,2260,345)="W !,""      NAME OF SUPERVISOR: ""_SUP"
 S DR(1,2260,350)="268      SUPERVISOR'S TITLE"
 S DR(1,2260,351)="I X'="""",'$$VCHAR^OOPSUTL4(X) W !,""Invalid character entered, (~,`,@,#,$,%,^,*,_,|,\,},{,[,],>, or <),"",!,""please edit."",! S Y=268"
 S DR(1,2260,355)="269      OFFICE PHONE......"
 ; Patch 8 - Phone must be 10 Numeric after stripping -
 S DR(1,2260,356)="I $TR(X,""/-*#"","""")'?10N W !?3,""Phone number must include area code and 7 digits only.  Example 703-123-8789"" S Y=269"
 S DR(1,2260,360)="@2"
 Q

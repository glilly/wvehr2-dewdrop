FSCXREFO ;SLC/STAFF-NOIS Xrefs Call Open and Referred ;1/11/98  15:27
 ;;1.1;NOIS;;Sep 06, 1998
 ;
AOLTYPE(OP,FIELD,VALUE,CALL) ; from dd 7100
 N LTYPE,STATUS
 I OP="SET" D  Q
 .I FIELD="STATUS" D  Q
 ..I VALUE=1 S LTYPE=$P(^FSCD("CALL",CALL,120),U,12) I LTYPE S ^FSCD("CALL","AOLTYPE",LTYPE,CALL)=""
 .I FIELD="LTYPE" D  Q
 ..I VALUE S STATUS=$P(^FSCD("CALL",CALL,0),U,2) I STATUS=1 S ^FSCD("CALL","AOLTYPE",VALUE,CALL)=""
 I OP="KILL" D  Q
 .I FIELD="STATUS" D  Q
 ..S LTYPE=$P(^FSCD("CALL",CALL,120),U,12) I LTYPE K ^FSCD("CALL","AOLTYPE",LTYPE,CALL)
 .I FIELD="LTYPE" D  Q
 ..K ^FSCD("CALL","AOLTYPE",VALUE,CALL)
 Q
 ;
AOPACKG(OP,FIELD,VALUE,CALL) ; from dd 7100
 N PACKG,STATUS
 I OP="SET" D  Q
 .I FIELD="STATUS" D  Q
 ..I VALUE=1 S PACKG=$P(^FSCD("CALL",CALL,120),U,13) I PACKG S ^FSCD("CALL","AOPACKG",PACKG,CALL)=""
 .I FIELD="PACKG" D  Q
 ..I VALUE S STATUS=$P(^FSCD("CALL",CALL,0),U,2) I STATUS=1 S ^FSCD("CALL","AOPACKG",VALUE,CALL)=""
 I OP="KILL" D  Q
 .I FIELD="STATUS" D  Q
 ..S PACKG=$P(^FSCD("CALL",CALL,120),U,13) I PACKG K ^FSCD("CALL","AOPACKG",PACKG,CALL)
 .I FIELD="PACKG" D  Q
 ..K ^FSCD("CALL","AOPACKG",VALUE,CALL)
 Q
 ;
ARPACKG(OP,FIELD,VALUE,CALL) ; from dd 7100
 N PACKG,STATUS
 I OP="SET" D  Q
 .I FIELD="STATUS" D  Q
 ..I VALUE=3 S PACKG=$P(^FSCD("CALL",CALL,120),U,13) I PACKG S ^FSCD("CALL","ARPACKG",PACKG,CALL)=""
 .I FIELD="PACKG" D  Q
 ..I VALUE S STATUS=$P(^FSCD("CALL",CALL,0),U,2) I STATUS=3 S ^FSCD("CALL","ARPACKG",VALUE,CALL)=""
 I OP="KILL" D  Q
 .I FIELD="STATUS" D  Q
 ..S PACKG=$P(^FSCD("CALL",CALL,120),U,13) I PACKG K ^FSCD("CALL","ARPACKG",PACKG,CALL)
 .I FIELD="PACKG" D  Q
 ..K ^FSCD("CALL","ARPACKG",VALUE,CALL)
 Q

PXAIMOD ;ISA/KWP - MODIFIER SUB FOR DATA2PCE;7/19/99
 ;;1.0;PCE PATIENT CARE ENCOUNTER;**73,121**;Aug 12, 1996
 ;
SET ;--SET AND NEW VARIABLES
 Q
SETVARA ;--SET VISIT VARIABLES
 N PXMOD
 S PXMOD=""
 F  S PXMOD=$O(PXAA("MODIFIERS",PXMOD)) Q:PXMOD=""  S AFTER1(PXMOD)=""
 Q
SETPXKA ;
 N PXMOD,PXCNT,PXMODIEN
 S PXMOD=""
 F PXCNT=1:1 S PXMOD=$O(AFTER1(PXMOD)) Q:PXMOD=""  D
 . ;S PXMODIEN=$$MODP^ICPTMOD($P(AFTER0,U),PXMOD,"E")
 . S PXMODIEN=$$MODP^ICPTMOD($P(AFTER0,U),PXMOD,"E",+^AUPNVSIT(PXAVISIT,0))
 . Q:PXMODIEN<1
 . S ^TMP("PXK",$J,"CPT",PXAK,1,PXCNT,"AFTER")=+PXMODIEN
 Q
SETVARB ;--SET VARIABLES BEFORE
 N PXMODIEN,PXIEN
 S PXIEN=0
 F  S PXIEN=$O(^AUPNVCPT(IENB,1,PXIEN)) Q:'PXIEN  D
 . S PXMODIEN=^AUPNVCPT(IENB,1,PXIEN,0)
 . S ^TMP("PXK",$J,"CPT",PXAK,1,PXIEN,"BEFORE")=PXMODIEN
 Q
SETPXKB ;--SET PXK ARRAY BEFORE
 N PXMOD,PXCNT,PXMODIEN
 S PXMOD=""
 F PXCNT=1:1 S PXMOD=$O(BEFOR1(PXMOD)) Q:PXMOD=""  D
 . ;S PXMODIEN=$$MODP^ICPTMOD($P(BEFOR0,U),PXMOD,"E")
 . S PXMODIEN=$$MODP^ICPTMOD($P(BEFOR0,U),PXMOD,"E",+^AUPNVSIT(PXAVISIT,0))
 . Q:PXMODIEN<1
 . S ^TMP("PXK",$J,"CPT",PXAK,1,PXCNT,"BEFORE")=+PXMODIEN
 Q

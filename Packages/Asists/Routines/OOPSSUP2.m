OOPSSUP2 ;HINES/WAA-S/E Supervisor Edit routine ;04/15/1998
 ;;2.0;ASISTS;;Jun 03, 2002
 ;;
 ; Note:  this routine became too big and had to be split.  The original
 ; routine is OOPSSUP2 and had the logic for both the Supervisor
 ; portion of the CA1 and CA2.  This routine now contains only the
 ; Supervisor portion of the CA2.
 ;
CA2 ; CA2 FORM
 N ITEM
 S (AIEN,AGN,ADD,CITY,STATE,ZIP)=""
 S (PNAME,PADD,PCITY,PSTATE,PZIP,PTITLE,STAT,SIEN)=""
 S MAX1=528
 W !!," Notice of Occupational Disease and Claim for Compensation (Form CA-2)"
 W !!,"     Supervisor's Report"
 W !,"     -------------------",!
 ;Patch 7 - default agency info, if Agency Name deleted, del other fields
 D AGNINFO^OOPSUTL2
 S DR=""
 S DR(1,2260,1)="230 19. AGENCY NAME...................//^S X=AGN;I X="""" S Y=""@5"""
 S DR(1,2260,2)="I X'="""",'$$VCHAR^OOPSUTL4(X) W !,""Invalid character entered, (~,`,@,#,$,%,*,_,|,\,},{,[,],>, or <),"",!,""please edit."",! S Y=230"
 S DR(1,2260,5)="231     STREET ADDRESS................//^S X=ADD"
 S DR(1,2260,6)="I X'="""",'$$VCHAR^OOPSUTL4(X) W !,""Invalid character entered, (~,`,@,#,$,%,*,_,|,\,},{,[,],>, or <),"",!,""please edit."",! S Y=231"
 S DR(1,2260,10)="232     CITY..........................//^S X=CITY"
 S DR(1,2260,11)="I X'="""",'$$VCHAR^OOPSUTL4(X) W !,""Invalid character entered, (~,`,@,#,$,%,*,_,|,\,},{,[,],>, or <),"",!,""please edit."",! S Y=232"
 S DR(1,2260,15)="233     STATE.........................//^S X=STATE"
 S DR(1,2260,20)="234     AGENCY ZIP CODE...............//^S X=ZIP"
 S DR(1,2260,25)="S Y=237"
 S DR(1,2260,30)="@5"
 S DR(1,2260,35)="231////@"
 S DR(1,2260,40)="232////@"
 S DR(1,2260,45)="233////@"
 S DR(1,2260,50)="234////@"
 S DR(1,2260,55)="237 20. EMPLOYEE'S DUTY STATION......."
 S DR(1,2260,56)="I X'="""",'$$VCHAR^OOPSUTL4(X) W !,""Invalid character entered, (~,`,@,#,$,%,*,_,|,\,},{,[,],>, or <),"",!,""please edit."",! S Y=237"
 S DR(1,2260,60)="238     STREET ADDRESS................"
 S DR(1,2260,61)="I X'="""",'$$VCHAR^OOPSUTL4(X) W !,""Invalid character entered, (~,`,@,#,$,%,*,_,|,\,},{,[,],>, or <),"",!,""please edit."",! S Y=238"
 S DR(1,2260,65)="239     CITY.........................."
 S DR(1,2260,66)="I X'="""",'$$VCHAR^OOPSUTL4(X) W !,""Invalid character entered, (~,`,@,#,$,%,*,_,|,\,},{,[,],>, or <),"",!,""please edit."",! S Y=239"
 S DR(1,2260,70)="240     STATE........................."
 S DR(1,2260,75)="241     ZIP CODE......................"
 S DR(1,2260,80)="W !,"" 21. REGULAR WORK HOURS:"""
 S DR(1,2260,85)="242     FROM.........................."
 S DR(1,2260,90)="243     TO............................"
 S DR(1,2260,95)="S ITEM=22 W !,"" 22. REGULAR WORK SCHEDULE.........: ""_$$GET1^DIQ(2260,D0,244,""E"")"
 S DR(1,2260,100)="K DIR S DIR(""A"")=""                                     "",DIR(""B"")=$$GET1^DIQ(2260,D0,244,""I"") D RWS^OOPSUTL2 S:$D(DIRUT) Y=""@2"""
 S DR(1,2260,105)="W !,"" 23. NAME AND ADDRESS OF PHYSICIAN FIRST PROVIDING MEDICAL CARE"""
 ;Patch 7 - default physician info - if physician deleted, del oth flds
 D PHINFO^OOPSUTL2
 S DR(1,2260,110)="245     NAME OF PHYSICIAN.............//^S X=PNAME;I X="""" S Y=""@4"""
 S DR(1,2260,111)="I X'="""",'$$NMCHK^OOPSUTL3(X) D NMERR^OOPSUTL3 K X S Y=245"
 S DR(1,2260,115)="246     STREET ADDRESS................//^S X=PADD"
 S DR(1,2260,116)="I X'="""",'$$VCHAR^OOPSUTL4(X) W !,""Invalid character entered, (~,`,@,#,$,%,*,_,|,\,},{,[,],>, or <),"",!,""please edit."",! S Y=246"
 S DR(1,2260,120)="247     CITY..........................//^S X=PCITY"
 S DR(1,2260,121)="I X'="""",'$$VCHAR^OOPSUTL4(X) W !,""Invalid character entered, (~,`,@,#,$,%,*,_,|,\,},{,[,],>, or <),"",!,""please edit."",! S Y=247"
 S DR(1,2260,125)="248     STATE.........................//^S X=STATE"
 S DR(1,2260,130)="249     ZIP CODE......................//^S X=PZIP"
 S DR(1,2260,131)="270     TITLE.........................//^S X=PTITLE"
 S DR(1,2260,135)="S Y=250"
 S DR(1,2260,140)="@4"
 S DR(1,2260,145)="246////@"
 S DR(1,2260,150)="247////@"
 S DR(1,2260,155)="248////@"
 S DR(1,2260,160)="249////@"
 S DR(1,2260,161)="270////@"
 S DR(1,2260,165)="250 24. 1ST DATE MEDICAL CARE RECEIVED"
 S DR(1,2260,170)="I X'="""",'$$FUT^OOPSUTL4(X) S Y=250"
 S DR(1,2260,175)="251 25. DO MEDICAL REPORTS SHOW EMPLOYEE IS DISABLED FOR WORK"
 S DR(1,2260,180)="252 26. DATE EMPLOYEE FIRST REPORTED CONDITION TO SUPERVISOR."
 S DR(1,2260,185)="I X'="""",'$$FUT^OOPSUTL4(X) S Y=252"
 S DR(1,2260,190)="253 27. DATE/TIME EMPLOYEE STOPPED WORK.."
 S DR(1,2260,195)="I X'="""",'$$FUT^OOPSUTL4($P(X,""."")) S Y=253"
 S DR(1,2260,200)="254 28. DATE/TIME EMPLOYEE'S PAY STOPPED."
 S DR(1,2260,205)="I X'="""",'$$FUT^OOPSUTL4($P(X,""."")) S Y=254"
 S DR(1,2260,210)="255 29. DATE EMPLOYEE WAS LAST EXPOSED TO CONDITIONS ALLEGED TO HAVE CAUSED             DISEASE OR ILLNESS..............."
 S DR(1,2260,215)="256 30. DATE/TIME RETURNED TO WORK......."
 S DR(1,2260,220)="I X'="""",'$$FUT^OOPSUTL4($P(X,""."")) S Y=256"
 S DR(1,2260,225)="@3"
 S DR(1,2260,230)="W !,"" 31. IF EMPLOYEE HAS RETURNED TO WORK AND WORK ASSIGNMENT HAS CHANGED, DESCRIBE      NEW DUTIES"""
 S DR(1,2260,235)="257     DESCRIPTION~"
 S DR(1,2260,240)="W !"
 S DR(1,2260,245)="S MAX=$$WP^OOPSUTL4(257)"
 S DR(1,2260,246)="I '$P(MAX,U,2) W !,""Invalid character entered, (~,`,@,#,$,%,^,*,_,|,\,},{,[,],>, or <),"",!,""please edit."",! S Y=257"
 S DR(1,2260,250)="I +MAX>MAX1 W !!,""Max length for field is "",MAX1,"" characters, you have entered "",+MAX,"". Please edit."",! S Y=257"
 S DR(1,2260,255)="60 32.  EMPLOYEE'S RETIREMENT.........//^S X=RET;I X<3 S Y=""@6"""
 S DR(1,2260,260)="61      OTHER RETIREMENT.............."
 S DR(1,2260,261)="I X'="""",'$$VCHAR^OOPSUTL4(X) W !,""Invalid character entered, (~,`,@,#,$,%,*,_,|,\,},{,[,],>, or <),"",!,""please edit."",! S Y=61"
 S DR(1,2260,262)="S Y=""@7"""
 S DR(1,2260,263)="@6"
 S DR(1,2260,264)="61////@"
 S DR(1,2260,265)="@7"
 S DR(1,2260,270)="258 33.  WAS INJURY CAUSED BY 3RD PARTY;I X=""N"" S Y=""@1"""
 S DR(1,2260,275)="259 34.  NAME OF THIRD PARTY..........."
 S DR(1,2260,276)="I X'="""",'$$VCHAR^OOPSUTL4(X) W !,""Invalid character entered, (~,`,@,#,$,%,*,_,|,\,},{,[,],>, or <),"",!,""please edit."",! S Y=259"
 S DR(1,2260,280)="260      STREET ADDRESS................"
 S DR(1,2260,281)="I X'="""",'$$VCHAR^OOPSUTL4(X) W !,""Invalid character entered, (~,`,@,#,$,%,*,_,|,\,},{,[,],>, or <),"",!,""please edit."",! S Y=260"
 S DR(1,2260,285)="261      CITY.........................."
 S DR(1,2260,286)="I X'="""",'$$VCHAR^OOPSUTL4(X) W !,""Invalid character entered, (~,`,@,#,$,%,*,_,|,\,},{,[,],>, or <),"",!,""please edit."",! S Y=261"
 S DR(1,2260,290)="262      STATE........................."
 S DR(1,2260,295)="263      ZIP CODE......................"
 S DR(1,2260,300)="S Y=""@8"""
 S DR(1,2260,303)="@1"
 S DR(1,2260,304)="259////@"
 S DR(1,2260,305)="260////@"
 S DR(1,2260,306)="261////@"
 S DR(1,2260,307)="262////@"
 S DR(1,2260,308)="263////@"
 S DR(1,2260,309)="@8"
 S DR(1,2260,310)="W !!,""           Signature of Supervisor"""
 S DR(1,2260,315)="W !,""       -----------------------------------"""
 S DR(1,2260,320)="S ITEM=35 D EXCEPT^OOPSUTL2;264      EXCEPTION"
 S DR(1,2260,321)="I X'="""",'$$VCHAR^OOPSUTL4(X) W !,""Invalid character entered, (~,`,@,#,$,%,*,_,|,\,},{,[,],>, or <),"",!,""please edit."",! S Y=264"
 S DR(1,2260,325)="W !,""      NAME OF SUPERVISOR: ""_SUP"
 S DR(1,2260,330)="268      SUPERVISOR'S TITLE"
 S DR(1,2260,331)="I X'="""",'$$VCHAR^OOPSUTL4(X) W !,""Invalid character entered, (~,`,@,#,$,%,*,_,|,\,},{,[,],>, or <),"",!,""please edit."",! S Y=268"
 S DR(1,2260,345)="269      OFFICE PHONE......"
 ; Patch 8 - Phone must be 10 Numeric after stripping -
 S DR(1,2260,346)="I $TR(X,""/-*#"","""")'?10N W !?3,""Phone number must include area code and 7 digits only.  Example 703-123-8789"" S Y=269"
 S DR(1,2260,350)="@2"
 Q

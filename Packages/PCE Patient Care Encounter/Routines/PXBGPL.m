PXBGPL ;ISL/JVS - GATHER ACTIVE PROBLEM LIST ENTRIES ;5/12/97  11:58
 ;;1.0;PCE PATIENT CARE ENCOUNTER;**11,28**;Aug 12, 1996
 ;
 ;
 ;
 W !,"This is not an entry point"
 ;
PL(PATIENT) ;--Entry point
 I '$L($T(ACTIVE^GMPLUTL)) Q
 ;
 ;--Set,kill and New
 N LINE,SUB,PXBC
 K PXBKYPL,PXBSAMPL,PXBSKYPL,PXBPMT
 ;
 D ACTIVE^GMPLUTL(PATIENT,.PXBPLA)
 ;
A ;
 Q:'$D(PXBPLA)
 S LINE=0 F  S LINE=$O(PXBPLA(LINE)) Q:LINE=""  D
 .Q:$P($G(PXBPLA(LINE,2)),"^",2)']""
 .S ^TMP("PXBSAMPL",$J,LINE)=$P(PXBPLA(LINE,2),"^",2)_"^"_$P(PXBPLA(LINE,1),"^",2)
 .S PXBPMT("PL",$P(PXBPLA(LINE,2),"^",2)_" "_$P(PXBPLA(LINE,1),"^",2))=""
 .S ^TMP("PXBKYPL",$J,$P(PXBPLA(LINE,2),"^",2),LINE)=$P(PXBPLA(LINE,2),"^",2)_"^"_$P(PXBPLA(LINE,1),"^",2)
 .;S PXBSKYPL(LINE,+PXBPLA(LINE,0))=""
 .K PXBPLA(LINE)
B ;
 S PXBCNTPL=+PXBPLA(0)
 Q

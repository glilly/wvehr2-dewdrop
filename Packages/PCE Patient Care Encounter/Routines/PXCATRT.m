PXCATRT ;ISL/dee - Translates data from the PCE Device Interface into PCE's PXK format for Treatments ;8/1/96
 ;;1.0;PCE PATIENT CARE ENCOUNTER;;Aug 12, 1996
 Q
 ;   PXCATRT   Pointer to the Treatment file (9999999.17)
 ;
TRT(PXCAPROC,PXCANUMB,PXCAPRV,PXCAINDX,PXCAERRS,PXCATRT) ;TREATMENT Called from within CPT^PXCACPT
 S PXCAFTER=PXCATRT_"^"_PXCAPAT_"^"_PXCAVSIT_"^"
 S PXCAFTER=PXCAFTER_$P(PXCAPROC,"^",2)_"^^"
 S PXCAFTER=PXCAFTER_$P(PXCAPROC,"^",6)
 ;Diagnosis
 S ^TMP(PXCAGLB,$J,"TRT",PXCANUMB,"IEN")=""
 S ^TMP(PXCAGLB,$J,"TRT",PXCANUMB,0,"BEFORE")=""
 S ^TMP(PXCAGLB,$J,"TRT",PXCANUMB,0,"AFTER")=PXCAFTER
 S ^TMP(PXCAGLB,$J,"TRT",PXCANUMB,12,"BEFORE")=""
 S ^TMP(PXCAGLB,$J,"TRT",PXCANUMB,12,"AFTER")=$P(PXCAPROC,"^",4)_"^^^"_$S(PXCAPRV>0:PXCAPRV,1:"")
 S ^TMP(PXCAGLB,$J,"TRT",PXCANUMB,802,"BEFORE")=""
 S ^TMP(PXCAGLB,$J,"TRT",PXCANUMB,802,"AFTER")=$P(PXCAPROC,"^",7)
 S ^TMP(PXCAGLB,$J,"TRT",PXCANUMB,812,"BEFORE")=""
 S ^TMP(PXCAGLB,$J,"TRT",PXCANUMB,812,"AFTER")="^"_PXCAPKG_"^"_PXCASOR
 Q
 ;

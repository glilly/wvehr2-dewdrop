PRCUDCT ;WISC/DJM-INDEX FMS DOCUMENT TRANSACTION REJECTS ;4/15/94  1:25 PM
V ;;5.0;IFCAP;;4/21/95
IN ;THIS ROUTINE WILL BE CALLED FROM THE 'FMS' SERVER VIA FILE 423.5
 ;ENTRY FOR THE DOCUMENT CONFIRMATION TRANSACTION.
 ;PRCDA IS THE INTERNAL ENTRY NUMBER FOR THE RECORD FROM FILE 423.6.
 ;Q:'$D(LEM)
 N PRCMG,PRCXM,LINE,STATION,STCK,ENTRY,ENCK,MGP,NAME,DIE,DR,DA,MTI
 S LINE=$G(^PRCF(423.6,PRCDA,1,10000,0))
 S MGP=$O(^PRCF(423.5,"B",$P(LINE,U)_"-"_$P(LINE,U,5),0))
 S MGP=$G(^PRCF(423.5,MGP,0)),PRCMG=$P($G(^XMB(3.8,$P(MGP,U,2),0)),U)
 N XL S XL=1 D  D PERROR^PRCODCT1 Q
 .S LINE=$G(^PRCF(423.6,PRCDA,1,10000,0))  I $P(LINE,U,5)'="DCT" Q
 .S STATION=$P(LINE,U,4),STCK=$O(^PRC(411,"B",STATION,0)) I STCK'>0 S PRCXM(XL)=$P($T(ERROR+2),";;",2) Q
 .S ENTRY=$P(LINE,U,6) I ENTRY="" S PRCXM(XL)=$P($T(ERROR+4),";;",2) Q
ENCK .Q
 ;
ERROR ;HERE IS THE LIST OF ERROR MESSAGES
 ;;This message is not identified as a Document Confirmation Transaction (DCT).
 ;;The STATION number sent from FMS can not be found at this location.
 ;;The TRANSACTION file entry returned from FMS can not be found.
 ;;This FMS transaction has no FMS TRANSACTION CODE.

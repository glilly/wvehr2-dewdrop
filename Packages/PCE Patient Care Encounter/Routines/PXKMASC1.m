PXKMASC1 ;ISL/JVS - SECOND ROUTINE ;5/21/96  13:20
 ;;1.0;PCE PATIENT CARE ENCOUNTER;;Aug 12, 1996
 ;
OUT ;
 N SUB,REF
 K ^TMP("PXKMASC1",$J)
 S SUB=1
 F REF="PXKAV","PXKBV","PXSDOE","VSIT","PXCA" D
 .Q:'$D(@REF)
 .F  S REF=$Q(@REF) Q:REF=""  D  K @REF
 ..S ^TMP("PXKMASC1",$J,SUB,1)=REF
 ..S ^TMP("PXKMASC1",$J,SUB,2)=@REF
 ..S SUB=SUB+1
 Q
IN ;
 N SUB,RESTOR
 S SUB=0
 F  S SUB=$O(^TMP("PXKMASC1",$J,SUB)) Q:SUB=""  D
 .S RESTOR=$G(^TMP("PXKMASC1",$J,SUB,1))
 .S @RESTOR=$G(^TMP("PXKMASC1",$J,SUB,2))
 K ^TMP("PXKMASC1",$J)
 Q
